<!--pages/order-list/order-list.wxml-->
<view class="container">
  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="order-list" wx:if="{{orders.length > 0}}">
    <view class="order-card" wx:for="{{orders}}" wx:key="id" bindtap="onOrderTap" data-id="{{item.id}}">
      <view class="order-header">
        <text class="order-no">è®¢å•å·ï¼š{{item.orderNo}}</text>
        <text class="order-status">{{statusText[item.status]}}</text>
      </view>
      <view class="order-items">
        <view class="order-item" wx:for="{{item.items}}" wx:key="id" wx:for-item="goods">
          <image class="order-item-image" src="{{goods.image}}" mode="aspectFill"></image>
          <view class="order-item-info">
            <text class="order-item-name">{{goods.name}}</text>
            <view class="order-item-bottom">
              <view class="order-item-price-box">
                <text class="price price-symbol">Â¥</text>
                <text class="price price-integer">{{goods.price}}</text>
              </view>
              <text class="order-item-count">x{{goods.count}}</text>
            </view>
          </view>
        </view>
      </view>
      <view class="order-footer">
        <text class="order-total">å…±{{item.items.length}}ä»¶å•†å“ åˆè®¡ï¼šÂ¥{{item.finalPrice}}</text>
        <view class="order-actions">
          <view class="order-action-btn secondary" wx:if="{{item.status === 'unpaid'}}" bindtap="onCancelOrder" data-id="{{item.id}}" catchtap="stopPropagation">å–æ¶ˆè®¢å•</view>
          <view class="order-action-btn primary" wx:if="{{item.status === 'unpaid'}}" bindtap="onPayOrder" data-id="{{item.id}}" catchtap="stopPropagation">ç«‹å³æ”¯ä»˜</view>
          <view class="order-action-btn primary" wx:if="{{item.status === 'shipped'}}" bindtap="onConfirmReceive" data-id="{{item.id}}" catchtap="stopPropagation">ç¡®è®¤æ”¶è´§</view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{orders.length === 0}}">
    <text class="empty-icon">ğŸ“¦</text>
    <text class="empty-text">æš‚æ— è®¢å•</text>
    <view class="empty-btn" bindtap="onGoShopping">å»é€›é€›</view>
  </view>
</view>

